<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>In Classe (Modular) - Docente</title>
  <style>
    :root{
      --bg:#130f14; --surface:#1b151b; --text:#f4eefe; --muted:#bdb0c3; --accent:#CFA8FF; --accent-strong:#b788ff; --radius-lg:12px; --hit:44px; }
    body{background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;margin:0;padding:20px}
    .page{max-width:920px;margin:0 auto}
    .lesson-card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:12px;padding:14px;margin:18px 0;border:1px solid rgba(255,255,255,0.03)}
    .lesson-title{font-size:1.15rem;font-weight:700;margin:6px 0}
    .lesson-meta{color:var(--muted);font-size:0.95rem}
    .btn{min-height:var(--hit);display:inline-flex;align-items:center;gap:10px;padding:8px 14px;border-radius:10px;font-weight:600;border:none;cursor:pointer}
    .btn-primary{background:var(--accent);color:#120a12}
    .btn-secondary{background:transparent;color:var(--accent);border:1px solid rgba(207,168,255,0.12)}
    .drawer-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.55);display:none;align-items:flex-end;justify-content:center;z-index:1000}
    .drawer{width:100%;max-width:760px;background:linear-gradient(180deg,var(--surface),#231824);border-top-left-radius:20px;border-top-right-radius:20px;padding:18px;max-height:86vh;overflow:auto}
    .drawer-header{border-bottom:1px solid rgba(255,255,255,0.03);padding-bottom:8px}
    .drawer-footer{display:flex;gap:8px;margin-top:12px}
    .variants-panel{display:none}
    @media(min-width:900px){.drawer{width:420px;position:fixed;top:120px;right:28px;border-radius:12px}}
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>In Classe ‚Äî Modalit√† Docente</h1>
      <p class="lesson-meta">Gestisci la lezione, registra valutazioni, carica materiali e analizza la crescita degli studenti</p>
    </header>

    <div class="lesson-card" data-lesson-id="m1">
      <div class="lesson-meta">Teoria ‚Ä¢ Matematica ‚Ä¢ Classe 3A</div>
      <div class="lesson-title">Introduzione all'Algebra Lineare (Modular)</div>
      <div class="lesson-meta">
        <div>‚åõ 08:00 - 09:00 ‚Ä¢ 60 min</div>
        <div>üìÖ luned√¨ 20 ottobre</div>
      </div>
      <div style="margin-top:12px;display:flex;gap:12px;align-items:center;">
        <button class="btn btn-primary" onclick="openRegister('m1')">üìã Registro</button>
        <button class="btn btn-secondary" onclick="editLesson('m1')">‚úèÔ∏è Modifica lezione</button>
        <button class="btn btn-secondary" onclick="openDrawer('m1')">‚ÑπÔ∏è Dettagli</button>
      </div>
    </div>

    <div class="lesson-card" data-lesson-id="m2">
      <div class="lesson-meta">Laboratorio ‚Ä¢ Scienze ‚Ä¢ Classe 4B</div>
      <div class="lesson-title">Esperimenti di Chimica Organica (Modular)</div>
      <div class="lesson-meta">
        <div>‚åõ 10:00 - 12:00 ‚Ä¢ 120 min</div>
        <div>üìÖ luned√¨ 20 ottobre</div>
      </div>
      <div style="margin-top:12px;display:flex;gap:12px;align-items:center;">
        <button class="btn btn-primary" onclick="openRegister('m2')">üìã Registro</button>
        <button class="btn btn-secondary" onclick="editLesson('m2')">‚úèÔ∏è Modifica lezione</button>
        <button class="btn btn-secondary" onclick="openDrawer('m2')">‚ÑπÔ∏è Dettagli</button>
      </div>
    </div>

  </div>

  <div id="drawerBackdrop" class="drawer-backdrop" role="dialog" aria-hidden="true">
    <aside class="drawer" role="document" aria-labelledby="lessonTitle">
      <button onclick="closeDrawer()" aria-label="Chiudi" style="position:absolute;right:14px;top:12px;background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text);padding:6px;border-radius:8px">‚úï</button>
      <header class="drawer-header">
        <h2 id="lessonTitle" class="lesson-title">Titolo lezione</h2>
        <div id="lessonShort" class="lesson-meta"></div>
      </header>

      <section id="lessonBody" style="margin-top:12px;color:var(--muted);">
        <!-- Teacher-focused details: activities, homework, evaluations, materials, notes -->
      </section>

      <footer class="drawer-footer">
        <button class="btn btn-secondary" onclick="uploadMaterial()">üìÅ Carica Materiale</button>
        <button class="btn btn-secondary" onclick="exportCsv()">‚¨áÔ∏è Esporta CSV</button>
      </footer>
    </aside>
  </div>

  <script>
    const LESSONS = {
      m1:{title:"Introduzione all'Algebra Lineare (Modular)", short:"Matematica ‚Ä¢ Classe 3A", activities:[], homework:[], evaluations:{}},
      m2:{title:"Esperimenti di Chimica Organica (Modular)", short:"Scienze ‚Ä¢ Classe 4B", activities:[], homework:[], evaluations:{}},
    };

    function openDrawer(id){
      const b=document.getElementById('drawerBackdrop');
      const t=document.getElementById('lessonTitle');
      const s=document.getElementById('lessonShort');
      const body=document.getElementById('lessonBody');
      const lesson=LESSONS[id];
      if(!lesson) return;
      t.textContent=lesson.title;
      s.textContent=lesson.short;
      body.innerHTML = `
        <h3>Attivit√†</h3>
        <div>(Lista attivit√† qui)</div>
        <h3>Compiti</h3>
        <div>(Lista compiti qui)</div>
        <h3>Valutazioni</h3>
        <div>(Scheda valutazioni e storico)</div>
        <h3>Note Docente</h3>
        <div contenteditable='true' style='background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;'>Aggiungi note qui...</div>
      `;
      b.style.display='flex'; b.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden';
    }
    function closeDrawer(){const b=document.getElementById('drawerBackdrop');b.style.display='none';b.setAttribute('aria-hidden','true');document.body.style.overflow='';}

    function openRegister(id){
      alert('Apri registro per lezione ' + id + ' (implementare lista studenti e valutazioni)');
    }
    function editLesson(id){
      alert('Apri editor lezione per ' + id);
    }
    function uploadMaterial(){alert('Funzionalit√† Carica Materiale - da implementare');}
    function exportCsv(){alert('Esporta CSV - da implementare');}

    // Keep localStorage keys aligned with docs
    // inClasse_activities_${lessonKey}, inClasse_homework_${lessonKey}, inClasse_evaluations_${lessonKey}

  </script>
</body>
</html>
